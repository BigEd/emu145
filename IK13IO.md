# Входы #

У микроконтроллера ИК13 есть есть следующие входы:

  * фазовые входы Ф1,Ф2,Ф3,Ф4

  * вход синхронизации СИ

  * вход начальной установки У

  * вход РгР

  * вход РгМ

  * пользовательские входы К1,К2,H


## Вход СИ ##
-- По фронту входа СИ происходит установка флага прерывания и выборка следующей макрокоманды будет произведена по адресу 0x01. При выборки макрокомманды с адресом 0x01 флаг прерывания очищается. Причем в программе возможен безусловный переход на адрес 0x01 и в этом случае флаг очистится безусловно. В серийных микрокалькуляторах вход используется ведомыми микроконтроллерами для вызова процедуры проверки байта канала связи. --

## Вход У ##
По фронту входа У происходит начальная установка микроконтроллера. Сбрасываются все счетчики и происходит выборка макрокомманды по адресу 0x00. В серийных микрокалькуляторах вход не используется.

## Вход РгР ##
Поданная на вход информация будет вдвинута в регистр Р на следующем микротакте. В микрокалькуляторах соеденен с выходом РгР образуя замкнутое кольцо. Из-за особенностей архитектуры расширить кольцо РгР можно, но при этом необходимо позаботится и о программной части -- регист Р используется для хранения адреса следующей макрокоманды и программа инициализации начинающаяся с адреса 0x00 должна позаботится о форматировании расширенного регистра Р и занесении адресов команд обработки расширенного регистра Р в соответсвтующие ячейки.

## Вход РгМ ##
Поданная на вход информация будет вдвинута в регистр М на следующем микротакте. В микрокалькуляторах вход РгМ одноко контроллера соеденен с выходом РгМ предидущего контроллера или ОЗУ, образуя кольцо оперативной памяти.

## Входы К1 и К2 ##
Эти входы главным образом предназначены для опроса клавиатуры. Их поведение зависит клавным образом от поля АСП{1] макрокомманды. Если поле 0<= АСП{1] <=3 и происходит опрос регистра Т, то информация из входов К1 и К2 будет защелкнута на спаде сигнала Д  до выборки следующей макрокомманды. При этом информация будет также вдвинута в регистр S1 при этом в конце макротакта регистр S  будет установлен так S=(K2<<3)|K1; Регистр Т будет установлен так -- T=K1|K2|H;
Если поле АСП{1] более 3 и происходит опрос регистра Т -- то регистр Т будет установлен Т=K1|K2|H; а защелкивания входов и изменения регистра S1 происходить не будет.

## Вход H ##
В этот вход не защелкивается. При опросе регистра Т или регистра H -- регистр будет установлен как Т=K1|K2|H; при этом необходимо учитывать вышесказанное о входах К1 и К2. При этом регистр H (4бита) будет установлен так - РегН=(ВходH)?1:0;  рекомендуемая микрокомманда для опроса регистра H -- S1=S1|H; Σ=S1+0xF; L=П -- при этом L будет приравнено значению входа H

# Выходы #
  * Выходы Д2-Д13
  * Выходы I1-I7
  * Выход I8
  * Выход Си
  * Выход РгР
  * Выход РгМ

## Выходы Д2-Д13 ##
Выходы Д2-Д13 соответсвтуют значению счетчика Д. Выходы активны только при обработке макрокоманды с полем 0<=АСП{1]<=3.
## Выходы I1-I7 ##
При исполнении микроконтроллером макрокомманды с полем 0<=АСП{1]<=3, при Д1-Д12 происходит занесения значения [R1](https://code.google.com/p/emu145/source/detail?r=1){Д1] - [R1](https://code.google.com/p/emu145/source/detail?r=1){Д12] во временный 4х битовый регистр РИ -- значение регистра  переносится в регистр-защелку по фронту сигнала Д. защелка соеденена с 7-сегментным декодером который управляет выводами I1-I7. Таким образом при стробе Д2 выходы I1-I7 содержат 7-сегментный код из [R1](https://code.google.com/p/emu145/source/detail?r=1){Д1] на протяжении всего цикла Д2.
## Выход I8 ##
При исполнении микроконтроллером макрокомманды с полем 0<=АСП{1]<=3, при Д2-Д13 однобитовый регистр хранения переноса L соеденен с выходом I8 подаваемым на сегмент "точка";
Необходима осторожность в вычислениях в это время, что-бы избежать засвета нежелательной точки. Синхропоследовательность для отображения на дисплее не выполняет никаких действий с регистром Р и простаивает два макротакта из 3х -- на третьем макротакте произходит присвоение S=S+1; L=П -- таким образом точка загорится только в одном разряде.

## Выход СИ ##
При значении счетчиков  Е3Д14Б4 выход СИ становится 1, во всех других случаях -- 0. Выход ведущего микроконтроллера соеденён с входами СИ ведомых микроконтроллеров, вызывая прерывание. Таким образом посчитав количество СИ -- ведомый микроконтроллер будет знать какая страница памяти М начнет вдвигаться.

## Выход РгР ##
Информация из регистра Р выдвигается при каждом микротакте на этот выход. В серийных калкуляторах соеденен со входом РгР этого-же микроконтроллера, образуя кольцо на 42 тетрады. Подробнее читать выше про вход РгР.

## Выход РгМ ##
Информация из регистра М выдвигается при каждом микротакте на этот выход. Выход РгМ микроконтроллера соеденен со входом РгМ следующего микроконтроллера или регистра памяти в кольце. Подробнее читать выше про вход РгМ.